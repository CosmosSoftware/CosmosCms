@using System.Reflection
@{
    var assemblyName = Assembly.GetExecutingAssembly().GetName();
}
<!DOCTYPE HTML>
<html>
<head>
    <meta name="viewport" content="width=device-width" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />

    <script src="https://code.jquery.com/jquery-3.6.1.min.js" integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <script src="/ccms/js/TimeUtils.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>

</head>
<body style="margin:0px;padding:0px;background-color:#4d4d4d;">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                <img height="28" src="~/images/logos/cosmos-logo.png" /> Cosmos
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" onclick=" bgEditClick('Files')">Files</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="bgEditClick('Preview')">Preview</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" onclick="bgEditClick('Close')">Close</a>
                    </li>
                </ul>
                <div class="navbar-text text-muted ms-3 fs-6">@assemblyName.Version</div>
                <span id="timeZone" class="navbar-text ms-3 me-3 fs-6"></span>
                <div class="navbar-text">Title:</div>
                <input class="form-control ms-2 me-2" style="max-width:260px;" name="tbTitle" id="tbTitle" value="@ViewData["PageTitle"]" />
                <div class="navbar-text">Published:</div>
                <input class="form-control ms-2 me-2" name="tbPublished" id="tbPublished" style="max-width:200px;" value="@((DateTimeOffset?)ViewData[" Published"])" />
                <button class="btn btn-secondary" onclick="bgEditClick('Save')" type="button">Save</button>
            </div>
        </div>
    </nav>

    <script>
        var next;
        var fileMgrPopup;

        function bgEditClick(command) {

            switch (command) {
                case "Save":
                    $("#frmSave").submit();
                    break;
                case "Files":
                    fileMgrPopup = window.open('@Url.Action("Popup", "FileManager")', '_blank', 'height=510,width=1200,menubar=no,location=no,status=no,titlebar=no,toolbar=no');
                    break;
                default:
                    bgEditClickCustom(command);
                    break;
            }
        }

        function saveFirst() {
            saveChanges(saveFirstModal, next);
        }

        function doNotSave() {
            saveFirstModal.hide();
            next();
        }

        function getLocalTimeZone() {
            var datetime = new Date();
            var dateTimeString = datetime.toString();
            var timezone = dateTimeString.substring(dateTimeString.indexOf("(") - 1);
            return timezone;
        }

        $(document).ready(function () {
            var timeZoneElement = $("#timeZone");
            timeZoneElement.html(getLocalTimeZone());

            $('#Published').daterangepicker({
                timePicker: true,
                singleDatePicker: true,
                showDropdowns: true,
                locale: {
                    format: 'MM/DD/YYYY hh:mm A'
                }
            });
        });

    </script>
    @RenderBody()
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>

    @await RenderSectionAsync("Scripts", false)
</body>
</html>